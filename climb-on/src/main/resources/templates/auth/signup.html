<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/baseLayout}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">


    <th:block layout:fragment="containerFragment">
        <section>
            <div class="inner">

                <div class="cont">
                    <div class="top-area" th:replace="~{/auth/login :: topArea}"></div>
                    <form action="/auth/signup" method="post">
                        <div class="input-wrap">
                            <label for="userId">아이디</label>
                            <input type="text" id="userId" name="userId" placeholder="example@climb.com" onkeyup="emailValidCheck(event)" required/>
                            <button type="button">중복확인</button>
                            <p class="error-message"></p>
                        </div>
                        <div class="input-wrap">
                            <label for="password">비밀번호</label>
                            <input type="password" name="password" id="password" placeholder="비밀번호 입력 (6자 이상 20자 이하/ 영문, 숫자 필수포함)" onkeyup="passwordValidCheck(event)" required/>
                            <p class="error-message"></p>
                        </div>
                        <div class="input-wrap">
                            <label for="passwordCheck">비밀번호 확인</label>
                            <input type="password" name="passwordCheck" id="passwordCheck" placeholder="비밀번호 확인" required/>
                            <p class="error-message"></p>
                        </div>
                        <div class="input-wrap">
                            <label for="nickname">닉네임</label>
                            <input type="text" id="nickname" name="nickname" placeholder="닉네임 입력" required/>
                            <button type="button">중복확인</button>
                            <p class="error-message"></p>
                        </div>
                        <button type="submit">회원가입</button>
                    </form>
                </div>

            </div>
        </section>

    </th:block>

    <th:block layout:fragment="javascript">
        <script th:inline="javascript">
            const passwordValidCheck = event => {
                let password = document.getElementById("password");
                let errorText = findNextTag(password, "p");

                if (password.length < 6) {
                    errorText.textContent = "비밀번호는 6자 이상이어야 합니다.";
                } else if (password.length > 20) {
                    errorText.textContent = "비밀번호는 20자를 초과할 수 없습니다.";
                } else {
                    const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/;
                    if (!passwordPattern.test(password)) {
                        errorText.textContent = "비밀번호에는 영문과 숫자가 포함되어야 합니다.";
                    } else {
                        errorText.textContent = "";
                    }
                }

            }
        </script>
        <script th:src="@{/js/page/auth.js}"></script>
    </th:block>
</html>